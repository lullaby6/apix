function apix(t,e={}){let a=e?.method??"GET",r=e?.body??null,i=e?.retries??0,n=e?.retryDelay??1e3,o=e?.timeout??1e4,s=new AbortController,l=s.signal,u=null,d=async(f=0)=>{try{u=setTimeout(()=>s.abort(),o);let p={...e,headers:{..."GET"!==a&&r?{"Content-Type":"application/json"}:{},...e.headers||{}},..."GET"!==a&&r?{body:JSON.stringify(r)}:{},signal:l},w=await fetch(t,p);if(clearTimeout(u),!w.ok)throw Error(`Request failed with status ${w.status}`);let h=w.headers.get("Content-Type");if(h&&h.includes("application/json"))return await w.json();throw Error("Response is not in JSON format")}catch(y){if(clearTimeout(u),"AbortError"===y.name)throw Error("Request timed out");if(f<i)return console.warn(`Retry attempt ${f+1} failed: ${y.message}`),await new Promise(t=>setTimeout(t,n)),d(f+1);throw console.error("Request failed:",y),y}};return d()};module.exports = apix;